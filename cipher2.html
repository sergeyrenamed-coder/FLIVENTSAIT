<!doctype html>
<html lang="ru">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Cipher 2 — Base64</title>
<style>body{background:#051018;color:#dfeeff;font-family:monospace;padding:32px}pre{background:#061016;padding:12px;border-radius:6px}</style></head>
<body>
<h2>Часть 2 — Base64</h2>
<p>Найдите скрытую строку (base64) и декодируйте. Затем введите в поле в формате <code>N- token</code>.</p>
<p>Подсказка: проверьте исходный код страницы или используйте devtools.</p>
<pre id="b64">(ищите скрытую строку)</pre>
<div style="margin-top:12px"><input id="ans" style="width:100%;padding:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit" placeholder="2- ..."/></div>
<div style="margin-top:8px;display:flex;gap:8px;justify-content:flex-end"><button id="check">Проверить</button><button id="next">Дальше</button></div>
<div id="msg" style="margin-top:8px;color:#9fb0c8"></div>
<script>
const STORAGE_KEY='cryptquest_v2_parts';function load(){try{return JSON.parse(localStorage.getItem(STORAGE_KEY))}catch(e){return null}}function save(s){localStorage.setItem(STORAGE_KEY,JSON.stringify(s))}
const st=load();if(!st){alert('Прогресс не найден — вернитесь на главную.');}

const encoded = btoa(`${st.parts[1].id}- ${st.parts[1].token}`);
document.getElementById('b64').textContent = '(проверьте data-b64 в элементе #secret)';

const secret=document.createElement('div');secret.id='secret';secret.style.display='none';secret.dataset.b64 = encoded;document.body.appendChild(secret);


document.getElementById('check').addEventListener('click',()=>{
const v=document.getElementById('ans').value.trim();if(v===`${st.parts[1].id}- ${st.parts[1].token}`){st.parts[1].found=true;save(st);document.getElementById('msg').textContent='Верно! Часть засчитана.'}else document.getElementById('msg').textContent='Неверно.'
});
document.getElementById('next').addEventListener('click',()=>{window.location.href='cipher3.html'})
</script>



</body>

<audio id="bgMusic" autoplay loop style="display:none">
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
  
  document.addEventListener('DOMContentLoaded', function() {
    const music = document.getElementById('bgMusic');
    music.volume = 0.5; 
    
    
    document.body.addEventListener('click', function() {
      music.play().catch(e => console.log('Auto-play prevented'));
    }, { once: true });
  });
</script>

</html>