<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FrontLineMC — CRYPT-QUEST</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #050608;
      --card: #061016;
      --accent: #ff3b3b;
      --muted: #9fb0c8;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#0b0c10);color:#e6eef8;font-family:system-ui,Roboto,Arial;overflow:hidden}
    .page{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px}
    .logo{position:fixed;left:18px;top:16px;display:flex;gap:10px;align-items:center;font-weight:700}
    .logo .dot{width:14px;height:14px;border-radius:3px;background:linear-gradient(45deg,#ff7b7b,#ff3b3b);box-shadow:0 0 10px rgba(255,59,59,0.6)}
    .monitor{width:520px;height:300px;border-radius:12px;overflow:hidden;margin-bottom:22px;background:#000;box-shadow:0 10px 40px rgba(0,0,0,0.6);position:relative}
    .monitor img{width:100%;height:100%;object-fit:cover;display:block;animation:glitch 3s infinite}
    @keyframes glitch{
      0%{filter:none}10%{filter:contrast(1.5) hue-rotate(20deg)}20%{filter:none}
      30%{transform:translate(2px,-2px)}31%{transform:none}
      50%{filter:brightness(1.3) contrast(1.2)}51%{filter:none}
      70%{transform:translate(-1px,1px)}71%{transform:none}
      90%{filter:hue-rotate(-15deg) contrast(1.4)}100%{filter:none}
    }

    h1{font-family:'Press Start 2P',monospace;font-size:22px;margin:12px 0 20px;color:#fff;text-align:center;text-shadow:0 0 10px rgba(255,59,59,0.08)}
    .controls{display:flex;gap:18px;align-items:center;justify-content:center}
    .btn{padding:14px 30px;border-radius:12px;border:none;font-family:'Press Start 2P',monospace;cursor:pointer;transition:transform .12s,box-shadow .12s}
    .btn:active{transform:translateY(2px)}
    .btn-yes{background:linear-gradient(180deg,#ff5a5a,#c91f1f);color:#fff;box-shadow:0 0 28px rgba(255,59,59,0.35)}
    .btn-no{background:linear-gradient(180deg,#222,#111);color:#ddd}

    footer{position:fixed;left:50%;transform:translateX(-50%);bottom:12px;color:var(--muted);font-size:13px}

    
    .tester-btn{position:fixed;top:16px;right:18px;background:rgba(0,0,0,0.35);border:1px solid var(--glass);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:50}
    .modal.open{display:flex}
    .card{width:320px;background:linear-gradient(180deg,var(--card),#041018);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 40px rgba(0,0,0,0.6)}
    .card h3{margin:0 0 8px;font-size:14px}
    .card label{display:block;margin-top:8px;font-size:13px;color:var(--muted)}
    .card input{width:100%;padding:8px;margin-top:6px;border-radius:6px;background:transparent;border:1px solid var(--glass);color:inherit}
    .card .row{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
    .small-btn{padding:8px 10px;border-radius:6px;border:none;background:#0b1620;color:var(--muted);cursor:pointer}

    
    @media (max-width:900px){
      .monitor{width:92%;height:200px}
      h1{font-size:16px}
      .card{width:92%}
    }
  </style>
</head>
<body>
  <div class="logo"><div class="dot"></div><div>FrontLineMC-IVENT</div></div>

  <div class="page" role="main">
    <div class="monitor" aria-hidden="true">
      <img src="https://steamuserimages-a.akamaihd.net/ugc/2502391334621905003/25B14DE545C16618899438204672586E892F86D6/?imw=630&imh=630&ima=fit&impolicy=Letterbox&imcolor=%23000000&letterbox=true" />
    </div>

    <h1>Вы готовы?</h1>

    <div class="controls" role="group" aria-label="Основные действия">
      <button class="btn btn-yes" id="yesBtn">Да</button>
      <button class="btn btn-no" id="noBtn">Нет</button>
    </div>
  </div>

  <button class="tester-btn" id="testerBtn" aria-haspopup="dialog">Тест/Войти</button>

  
  <div class="modal" id="testerModal" role="dialog" aria-modal="true" aria-label="Тестовый вход">
    <div class="card" role="document">
      <h3>Тестовый вход</h3>
      <label for="tlogin">Логин</label>
      <input id="tlogin" placeholder="Логин" autocomplete="off" />
      <label for="tpass">Пароль</label>
      <input id="tpass" type="password" placeholder="Пароль" autocomplete="off" />
      <div class="row">
        <button class="small-btn" id="tok">Войти</button>
        <button class="small-btn" id="tclose">Закрыть</button>
      </div>
      <div id="tmsg" style="margin-top:10px;color:var(--muted);font-size:13px"></div>
    </div>
  </div>

  <footer>Сделано при поддержке FrontLineMC by Sergey_Renamed & Chinami</footer>


  <audio id="bgMusic" loop autoplay>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <script>
   
    document.addEventListener('DOMContentLoaded', function() {
      const bgMusic = document.getElementById('bgMusic');
      bgMusic.volume = 0.3;
      
      
      bgMusic.play().catch(error => {
        console.log('Автозапуск заблокирован, ждем взаимодействия');
        
        const startMusicOnInteraction = () => {
          bgMusic.play();
          
          document.removeEventListener('click', startMusicOnInteraction);
          document.removeEventListener('keydown', startMusicOnInteraction);
          document.removeEventListener('touchstart', startMusicOnInteraction);
        };
        
        
        document.addEventListener('click', startMusicOnInteraction);
        document.addEventListener('keydown', startMusicOnInteraction);
        document.addEventListener('touchstart', startMusicOnInteraction);
      });
    });

    
    const STORAGE_KEY = 'cryptquest_v2_parts';
    const TOTAL_PARTS = 6;

    function randToken(n=12){
      const ch='abcdefghijklmnopqrstuvwxyz0123456789';
      let s='';
      for(let i=0;i<n;i++) s+=ch[Math.floor(Math.random()*ch.length)];
      return s;
    }

    function saveState(s){
      localStorage.setItem(STORAGE_KEY,JSON.stringify(s));
    }

    function loadState(){
      try{
        return JSON.parse(localStorage.getItem(STORAGE_KEY));
      }catch(e){
        return null;
      }
    }

    function ensureParts(){
      let st = loadState();
      if(st && st.parts && st.parts.length === TOTAL_PARTS) return st;
      const parts = [];
      for(let i=0;i<TOTAL_PARTS;i++) parts.push({id:i+1, token:randToken(12), found:false});
      st = {created:Date.now(), parts};
      saveState(st);
      return st;
    }

    ensureParts();

    
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');

    yesBtn.addEventListener('click', () => {
      window.location.href = 'cipher1.html';
    });

    
    noBtn.addEventListener('mouseenter', () => {
      const maxX = window.innerWidth - noBtn.offsetWidth - 40;
      const maxY = window.innerHeight - noBtn.offsetHeight - 40;
      const x = Math.floor(Math.random() * maxX);
      const y = Math.floor(Math.random() * maY);
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });

    
    const testerBtn = document.getElementById('testerBtn');
    const testerModal = document.getElementById('testerModal');
    const tlogin = document.getElementById('tlogin');
    const tpass = document.getElementById('tpass');
    const tok = document.getElementById('tok');
    const tclose = document.getElementById('tclose');
    const tmsg = document.getElementById('tmsg');

    testerBtn.addEventListener('click', () => {
      testerModal.classList.add('open');
      tmsg.textContent = 'Введите тестовые данные';
      tlogin.focus();
    });

    tclose.addEventListener('click', () => {
      testerModal.classList.remove('open');
      tmsg.textContent = '';
      tlogin.value = ''; 
      tpass.value = '';
    });

    tok.addEventListener('click', () => {
      const L = tlogin.value.trim(); 
      const P = tpass.value;
      if (L === 'Sergey_Renamed' && P === 'ImbaIvent') {
        tmsg.textContent = 'Успешно — вы вошли как тестировщик.';
        
        const st = loadState();
        if (st && st.parts) { 
          st.parts.forEach(p => p.found = true); 
          saveState(st); 
        }
        setTimeout(() => { 
          testerModal.classList.remove('open'); 
          window.location.href = 'final.html'; 
        }, 700);
      } else {
        tmsg.textContent = 'Неверные данные';
      }
    });

    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && testerModal.classList.contains('open')) {
        testerModal.classList.remove('open');
      }
    });

    
    testerModal.addEventListener('click', (ev) => {
      if (ev.target === testerModal) {
        testerModal.classList.remove('open');
      }
    });

    // Защита от ИИ
    (function() {
      const isBot = () => {
        return navigator.webdriver || 
               window.phantom || 
               window._phantom || 
               window.__nightmare || 
               window.callPhantom || 
               window._selenium ||
               navigator.userAgent.includes('Headless') || 
               navigator.userAgent.includes('PhantomJS') ||
               navigator.userAgent.includes('Puppeteer') || 
               navigator.userAgent.includes('Playwright') ||
               navigator.userAgent.includes('bot') || 
               navigator.userAgent.includes('crawler');
      };

      let humanDetected = false;
      const markHuman = () => humanDetected = true;
      
      ['mousemove', 'click', 'keydown', 'scroll', 'touchstart'].forEach(ev => 
        document.addEventListener(ev, markHuman)
      );

      setTimeout(() => {
        if (!humanDetected && isBot()) {
          document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column;color:#ff3b3b;font-family:monospace;"><h1>ACCESS DENIED</h1><p>Automated access detected</p></div>';
          throw new Error('AI protection triggered');
        }
      }, 3000);
    })();
  </script>
</body>
</html>